{"ast":null,"code":"var _jsxFileName = \"/Users/chenyangdu/Downloads/digital-human-project-updated/digital-human-frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport { OrbitControls } from '@react-three/drei';\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DigitalHuman() {\n  _s();\n  const [model, setModel] = useState();\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const loader = new FBXLoader();\n    loader.load('/models/girl1/source/girl.fbx', fbx => {\n      setModel(fbx);\n      setIsLoading(false);\n    }, undefined, err => {\n      console.error('Error loading model:', err);\n      setError(err);\n      setIsLoading(false);\n    });\n  }, []);\n  //1\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Error loading model.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 12\n    }, this);\n  }\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading model...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"primitive\", {\n    object: model,\n    scale: 1.0,\n    position: [0, 0, 0]\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 10\n  }, this);\n}\n_s(DigitalHuman, \"acnY5LhoIRxR5NNqVFgL09EC54I=\");\n_c = DigitalHuman;\nfunction App() {\n  _s2();\n  const [conversation, setConversation] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [input, setInput] = useState(\"\");\n  const handleUserInput = useCallback(async () => {\n    if (!input) return;\n    setLoading(true);\n    try {\n      const response = await fetch('http://localhost:5000/api/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          input\n        })\n      });\n      const data = await response.json();\n      setConversation(prev => [...prev, {\n        user: input,\n        bot: data.response\n      }]);\n      setInput(\"\");\n    } catch (error) {\n      console.error('Error:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [input]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"digital-human\",\n      children: /*#__PURE__*/_jsxDEV(Canvas, {\n        camera: {\n          position: [0, 1, 5],\n          fov: 50\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"ambientLight\", {\n          intensity: 0.5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"directionalLight\", {\n          position: [0, 5, 5]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DigitalHuman, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(OrbitControls, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"conversation\",\n      children: [conversation.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"User: \", msg.user]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Bot: \", msg.bot]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: e => {\n          if (e.key === 'Enter') {\n            handleUserInput();\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUserInput,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"wgCE9CInWG1T/JgsCjGqmNjER5c=\");\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"DigitalHuman\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Canvas","OrbitControls","FBXLoader","jsxDEV","_jsxDEV","DigitalHuman","_s","model","setModel","isLoading","setIsLoading","error","setError","loader","load","fbx","undefined","err","console","children","fileName","_jsxFileName","lineNumber","columnNumber","object","scale","position","_c","App","_s2","conversation","setConversation","loading","setLoading","input","setInput","handleUserInput","response","fetch","method","headers","body","JSON","stringify","data","json","prev","user","bot","className","camera","fov","intensity","map","msg","index","type","value","onChange","e","target","onKeyDown","key","onClick","_c2","$RefreshReg$"],"sources":["/Users/chenyangdu/Downloads/digital-human-project-updated/digital-human-frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport { OrbitControls } from '@react-three/drei';\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader';\nimport './App.css';\n\nfunction DigitalHuman() {\n  const [model, setModel] = useState();\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const loader = new FBXLoader();\n    loader.load(\n      '/models/girl1/source/girl.fbx',\n      (fbx) => {\n        setModel(fbx);\n        setIsLoading(false);\n      },\n      undefined,\n      (err) => {\n        console.error('Error loading model:', err);\n        setError(err);\n        setIsLoading(false);\n      }\n    );\n  }, []);\n//1\n  if (error) {\n    return <p>Error loading model.</p>;\n  }\n  if (isLoading) {\n    return <p>Loading model...</p>;\n  }\n  return <primitive object={model} scale={1.0} position={[0, 0, 0]} />;\n}\n\nfunction App() {\n  const [conversation, setConversation] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [input, setInput] = useState(\"\");\n\n  const handleUserInput = useCallback(async () => {\n    if (!input) return;\n    setLoading(true);\n    try {\n      const response = await fetch('http://localhost:5000/api/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ input }),\n      });\n      const data = await response.json();\n      setConversation((prev) => [...prev, { user: input, bot: data.response }]);\n      setInput(\"\");\n    } catch (error) {\n      console.error('Error:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [input]);\n\n  return (\n    <div className=\"App\">\n      <div className=\"digital-human\">\n        <Canvas camera={{ position: [0, 1, 5], fov: 50 }}>\n          <ambientLight intensity={0.5} />\n          <directionalLight position={[0, 5, 5]} />\n          <DigitalHuman />\n          <OrbitControls />\n        </Canvas>\n      </div>\n      <div className=\"conversation\">\n        {conversation.map((msg, index) => (\n          <div key={index}>\n            <p>User: {msg.user}</p>\n            <p>Bot: {msg.bot}</p>\n          </div>\n        ))}\n        {loading && <p>Loading...</p>}\n      </div>\n      <div className=\"input-container\">\n        <input\n          type=\"text\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter') {\n              handleUserInput();\n            }\n          }}\n        />\n        <button onClick={handleUserInput}>Send</button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}